!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["bind-property"]=e["bind-property"]||{})}(this,function(e){"use strict";function t(e){var t={changeListeners:new Map,preCommitListeners:new Map,priorityQueue:[]};return t.set(e,t),t}function n(){var e=e.get(this)||t(this);return e.changeListeners}function r(){var e=e.get(this)||t(this);return e.preCommitListeners}function i(e){var n=n.get(e)||t(e);return n.priorityQueue}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this).length=0,n.call(this).set(e,t)}function a(e){i(this).length=0,n.call(this).delete(e)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r.call(this).set(e,t)}function s(e){r.call(this).delete(e)}function c(e,t,n,r){if(n!==r){var i=y.get(e);void 0===i&&(i={source:e,changes:{}},y.set(e,i));var o=i.changes;o[t]={oldValue:n,newValue:r},w.add(e),L||(L=requestAnimationFrame(function(){var e=w,t=y;w=new Set,y=new Map,L=null,e.forEach(function(e){var n=t.get(e),r=n.changes;l(e,r)})}))}}function f(e){Object.defineProperties(e,{changeListeners:{get:n},preCommitListeners:{get:r},addChangeListener:{value:o},removeChangeListener:{value:a},addPreCommitListener:{value:u},removePreCommitListener:{value:s},suspendNotifications:{value:!1,writable:!0}})}function l(e,t){var n=i(e);0===n.length&&p(n),n.forEach(function(n,r){r(e,t,n)})}function p(e,t){e.changeListeners.forEach(function(e,n){t.push({priority:e,callback:n})}),t.sort(h)}function h(e,t){var n=~~e.priority,r=~~t.priority;return n===r?0:n>r?1:-1}function v(e){return function(){var t=this;return g(t)[e]}}function d(e,t){return function(r){var i=this,o=i.suspendNotifications,a=g(i)[e];"function"==typeof t.set&&(t.set.call(i,r),t.get&&(a=t.get.call(i)));var u=a;a===r||m(i,C({},e,{oldValue:u,newValue:r}))||(a=r,o!==!1||n.call(i).values().next().done||c(i,e,u,r),g(i)[e]=a)}}function g(e){if(P.has(e))return P.get(e);var t={};return P.set(e,t),t}function m(e,t){var n=!1;return e.preCommitListeners.forEach(function(r){n=r(e,t,n)===!1||n}),n}function b(e){return function(t){var n=t.prototype;P.has(n)||(f(n),P.set(n,!0));var r=Object.getOwnPropertyDescriptor(n,e)||{};P.has(r.get)||Object.defineProperty(n,e,{get:r.get||v(e),set:d(e,r),enumerable:r.enumerable})}}var y=new Map,w=new Set,L=void 0,C=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},P=new WeakMap;e.bindable=b,e.queueNotification=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy5qcyIsIi4uLy4uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzdG9yZSA9IG5ldyBXZWFrTWFwKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0b3JlKHNvdXJjZSl7XG4gICAgY29uc3Qgc3RvcmUgPSB7XG4gICAgICAgIGNoYW5nZUxpc3RlbmVyczogbmV3IE1hcCgpLFxuICAgICAgICBwcmVDb21taXRMaXN0ZW5lcnM6IG5ldyBNYXAoKSxcbiAgICAgICAgcHJpb3JpdHlRdWV1ZTogW11cbiAgICB9O1xuICAgIHN0b3JlLnNldChzb3VyY2UsIHN0b3JlKTtcbiAgICByZXR1cm4gc3RvcmU7XG59XG4vKipcbiAqIFRoZSBjaGFuZ2VMaXN0ZW5lcnMgbGlzdGVuaW5nIGZvclxuICogcHJvcGVydHkgY2hhbmdlcy5cbiAqXG4gKiBAcmV0dXJuIE1hcFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hhbmdlTGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IHN0b3JlID0gc3RvcmUuZ2V0KHRoaXMpIHx8IGNyZWF0ZVN0b3JlKHRoaXMpO1xuICAgIHJldHVybiBzdG9yZS5jaGFuZ2VMaXN0ZW5lcnM7XG59XG5cbi8qKlxuICogVGhlIGNoYW5nZUxpc3RlbmVycyBsaXN0ZW5pbmcgZm9yXG4gKiBwcmUgY29tbWl0IHByb3BlcnR5IGNoYW5nZXMuXG4gKlxuICogQHJldHVybiBNYXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByZUNvbW1pdExpc3RlbmVycygpIHtcbiAgY29uc3Qgc3RvcmUgPSBzdG9yZS5nZXQodGhpcykgfHwgY3JlYXRlU3RvcmUodGhpcyk7XG4gIHJldHVybiBzdG9yZS5wcmVDb21taXRMaXN0ZW5lcnM7XG59XG5cbi8qKlxuICogVGhlIGNoYW5nZUxpc3RlbmVycyBsaXN0ZW5pbmcgZm9yXG4gKiBwcmUgY29tbWl0IHByb3BlcnR5IGNoYW5nZXMuXG4gKlxuICogQHJldHVybiBBcnJheVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJpb3JpdHlRdWV1ZShzb3VyY2UpIHtcbiAgY29uc3Qgc3RvcmUgPSBzdG9yZS5nZXQoc291cmNlKSB8fCBjcmVhdGVTdG9yZShzb3VyY2UpO1xuICByZXR1cm4gc3RvcmUucHJpb3JpdHlRdWV1ZTtcbn1cblxuLyoqXG4gKiBBZGRzIGEgZnVuY3Rpb24gYXMgYSBjaGFuZ2UgbGlzdGVuZXIuXG4gKiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBwcm92aWRlZFxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0aGF0IGlzIG5vdGlmaWVkIG9mIHByb3BlcnR5IGNoYW5nZXMuXG4gKiBAcGFyYW0ge2ludH0gcHJpb3JpdHkgVGhlIHByaW9yaXR5IG9mIHRoZSBjYWxsYmFjay4gTGFyZ2VyIG51bWJlciBpbmRpY2F0ZSBsb3dlciBwcmlvcml0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2hhbmdlTGlzdGVuZXIoY2FsbGJhY2ssIHByaW9yaXR5ID0gMCkge1xuICAgIGdldFByaW9yaXR5UXVldWUodGhpcykubGVuZ3RoID0gMDtcbiAgICBnZXRDaGFuZ2VMaXN0ZW5lcnMuY2FsbCh0aGlzKS5zZXQoY2FsbGJhY2ssIHByaW9yaXR5KTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGEgY2FsbGJhY2sgdGhhdCBoYXMgYmVlbiBwcmV2aW91c2x5IGFkZGVkXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIHJlbW92ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hhbmdlTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICBnZXRQcmlvcml0eVF1ZXVlKHRoaXMpLmxlbmd0aCA9IDA7XG4gICAgZ2V0Q2hhbmdlTGlzdGVuZXJzLmNhbGwodGhpcykuZGVsZXRlKGNhbGxiYWNrKTtcbn1cblxuLyoqXG4gKiBBZGRzIGEgZnVuY3Rpb24gYXMgYSBjaGFuZ2UgbGlzdGVuZXIuXG4gKiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBwcm92aWRlZFxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0aGF0IGlzIG5vdGlmaWVkIG9mIHByb3BlcnR5IGNoYW5nZXMuXG4gKiBAcGFyYW0ge2ludH0gcHJpb3JpdHkgVGhlIHByaW9yaXR5IG9mIHRoZSBjYWxsYmFjay4gTGFyZ2VyIG51bWJlciBpbmRpY2F0ZSBsb3dlciBwcmlvcml0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJlQ29tbWl0TGlzdGVuZXIoY2FsbGJhY2ssIHByaW9yaXR5ID0gMCkge1xuICAgIGdldFByZUNvbW1pdExpc3RlbmVycy5jYWxsKHRoaXMpLnNldChjYWxsYmFjaywgcHJpb3JpdHkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYSBjYWxsYmFjayB0aGF0IGhhcyBiZWVuIHByZXZpb3VzbHkgYWRkZWRcbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gcmVtb3ZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcmVDb21taXRMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIGdldFByZUNvbW1pdExpc3RlbmVycy5jYWxsKHRoaXMpLmRlbGV0ZShjYWxsYmFjayk7XG59XG5cbi8qKlxuICogTm9ybWFsaXphdGlvbiBmdW5jdGlvbiBmb3IgYXBwbHlpbmcgdmFsdWVzIHRvIG9iamVjdHMuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBTZXQgY29tcGxleCBwcm9wZXJ0aWVzXG4gKiBhcHBseVZhbHVlKGh0bWxEaXYsICdzdHlsZS50cmFuc2Zvcm0nLCAndHJhbnNsYXRlM2QoMjVweCwgMjVweCwgMCknKTtcbiAqXG4gKiAvLyBjYWxsIGZ1bmN0aW9uIHdpdGggYXJndW1lbnRzXG4gKiBhcHBseVZhbHVlKGh0bWxCdXR0b24sICdzZXRBdHRyaWJ1dGUnLCBbJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZSddKTtcbiAqXG4gKiAvLyBjYWxsIGZ1bmN0aW9uIGluIGNvbnRleHRcbiAqIGFwcGx5VmFsdWUoaHRtbElucHV0LCBmdW5jdGlvbihvYmope3RoaXMudmFsdWUgPSBvYmouZmlyc3ROYW1lICsgJyAnICsgb2JqLmxhc3ROYW1lfSwgbXlPYmplY3QpO1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRTb3VyY2UgQW55IG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSB0YXJnZXQgcGF0aFxuICogQHBhcmFtIHtzdHJpbmcgfCBmdW5jdGlvbn0gcGF0aCBDYW4gYmUgYSBzdHJpbmcgb3IgZnVuY3Rpb25cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlIHRvIGFwcGx5LiAgSWYgdGhlIHBhdGggaXMgYSBmdW5jdGlvbiBhbmQgdGhlXG4gKiB2YWx1ZSBpcyBhbiBhcnJheSwgZWFjaCBlbGVtZW50IGlzIHBhc3NlZCBhcyBhbiBhcmd1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5VmFsdWUodGFyZ2V0U291cmNlLCBwYXRoLCB2YWx1ZSkge1xuICAgIGNvbnN0IHNpbXBsZSA9IHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJyB8fCBwYXRoLmluZGV4T2YoJy4nKSA9PT0gLTE7XG4gICAgbGV0IHRhcmdldCA9IHRhcmdldFNvdXJjZTtcbiAgICBsZXQgY29udGV4dDtcbiAgICAvLyBDaGVjayBmb3IgZGVlcCBvYmplY3QgcmVmZXJlbmNlc1xuICAgIGlmICghc2ltcGxlKSB7XG4gICAgICAgIGNvbnN0IHBhdGhzID0gcGF0aC5zcGxpdCgnLicpO1xuICAgICAgICBjb25zdCBsZW4gPSB+fnBhdGhzLmxlbmd0aDtcbiAgICAgICAgbGV0IGkgPSB+fjA7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IHBhdGhzW2ldO1xuICAgICAgICAgICAgY29udGV4dCA9IHRhcmdldDtcbiAgICAgICAgICAgIGlmIChpICE9PSBsZW4pIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBjb250ZXh0W2ZyYWdtZW50XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDaGVjayBmb3IgbWVtYmVyIHByb3BlcnRpZXNcbiAgICBlbHNlIGlmICh0eXBlb2YgcGF0aCA9PT0gJ2Z1bmN0aW9uJyAmJiBwYXRoIGluIHRhcmdldFNvdXJjZSkge1xuICAgICAgICB0YXJnZXQgPSB0YXJnZXRTb3VyY2VbcGF0aF07XG4gICAgICAgIGNvbnRleHQgPSB0YXJnZXRTb3VyY2U7XG4gICAgfVxuXG4gICAgLy8gQ2FsbCBmdW5jdGlvbiBpbiBvdXIgdGFyZ2V0J3MgY29udGV4dFxuICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIEZhc3RlciB0aGFuIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlcbiAgICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLnNwbGljZSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFwcGx5KGNvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5jYWxsKGNvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGFyZ2V0U291cmNlW3BhdGhdID0gdmFsdWU7XG4gICAgfVxufVxuXG5sZXQgY2hhbmdlc0J5T2JqZWN0ID0gbmV3IE1hcCgpO1xubGV0IHF1ZXVlID0gbmV3IFNldCgpO1xuXG5sZXQgbmV4dEZyYW1lSWQ7XG5cbi8qKlxuICogRnVuY3Rpb24gdXNlZCB0byBwcm9jZXNzIHByb3BlcnR5IGNoYW5nZVxuICogbm90aWZpY2F0aW9ucyBieSBwb29saW5nIGFuZCB0aGVuIGV4ZWN1dGluZ1xuICogdGhlIG5vdGlmaWNhdGlvbiBjaGFuZ2VMaXN0ZW5lcnMgb24gdGhlIG5leHQgdGljay5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvd25lciBvZiB0aGUgcHJvcGVydHkgYmVpbmcgY2hhbmdlZFxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5TmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdGhhdCBoYXMgY2hhbmdlZFxuICogQHBhcmFtIHtPYmplY3R9IG9sZFZhbHVlIFRoZSB2YWx1ZSBwcmlvciB0byB0aGUgY2hhbmdlXG4gKiBAcGFyYW0ge09iamVjdH0gbmV3VmFsdWUgVGhlIHZhbHVlIGFmdGVyIHRoZSBjaGFuZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1ZXVlTm90aWZpY2F0aW9uKHNvdXJjZSwgcHJvcGVydHlOYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICBpZiAob2xkVmFsdWUgPT09IG5ld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGluZm8gPSBjaGFuZ2VzQnlPYmplY3QuZ2V0KHNvdXJjZSk7XG5cbiAgICBpZiAoaW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGluZm8gPSB7XG4gICAgICAgICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgICAgIGNoYW5nZXM6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGNoYW5nZXNCeU9iamVjdC5zZXQoc291cmNlLCBpbmZvKTtcbiAgICB9XG4gICAgY29uc3QgY2hhbmdlcyA9IGluZm8uY2hhbmdlcztcblxuICAgIGNoYW5nZXNbcHJvcGVydHlOYW1lXSA9IHtvbGRWYWx1ZSwgbmV3VmFsdWV9O1xuICAgIHF1ZXVlLmFkZChzb3VyY2UpO1xuICAgIGlmIChuZXh0RnJhbWVJZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbmV4dEZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9jZXNzaW5nUXVldWUgPSBxdWV1ZTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc2luZ0NoYW5nZXMgPSBjaGFuZ2VzQnlPYmplY3Q7XG4gICAgICAgIHF1ZXVlID0gbmV3IFNldCgpO1xuICAgICAgICBjaGFuZ2VzQnlPYmplY3QgPSBuZXcgTWFwKCk7XG4gICAgICAgIG5leHRGcmFtZUlkID0gbnVsbDsgLy8gbnVsbGlmeSB0byBlbmFibGUgcXVldWluZyBhZ2FpblxuXG4gICAgICAgIHByb2Nlc3NpbmdRdWV1ZS5mb3JFYWNoKHNvdXJjZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7Y2hhbmdlc30gPSBwcm9jZXNzaW5nQ2hhbmdlcy5nZXQoc291cmNlKTtcbiAgICAgICAgICAgIG5vdGlmeShzb3VyY2UsIGNoYW5nZXMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1peGluTm90aWZpZXIocHJvdG90eXBlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocHJvdG90eXBlLCB7XG4gICAgICAgIGNoYW5nZUxpc3RlbmVyczoge1xuICAgICAgICAgICAgZ2V0OiBnZXRDaGFuZ2VMaXN0ZW5lcnNcbiAgICAgICAgfSxcblxuICAgICAgICBwcmVDb21taXRMaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgIGdldDogZ2V0UHJlQ29tbWl0TGlzdGVuZXJzXG4gICAgICAgIH0sXG4gICAgICAgIGFkZENoYW5nZUxpc3RlbmVyOiB7dmFsdWU6IGFkZENoYW5nZUxpc3RlbmVyfSxcbiAgICAgICAgcmVtb3ZlQ2hhbmdlTGlzdGVuZXI6IHt2YWx1ZTogcmVtb3ZlQ2hhbmdlTGlzdGVuZXJ9LFxuICAgICAgICBhZGRQcmVDb21taXRMaXN0ZW5lcjoge3ZhbHVlOiBhZGRQcmVDb21taXRMaXN0ZW5lcn0sXG4gICAgICAgIHJlbW92ZVByZUNvbW1pdExpc3RlbmVyOiB7dmFsdWU6IHJlbW92ZVByZUNvbW1pdExpc3RlbmVyfSxcbiAgICAgICAgc3VzcGVuZE5vdGlmaWNhdGlvbnM6IHt2YWx1ZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIE5vdGlmaWVzIGFsbCBjaGFuZ2VMaXN0ZW5lcnMgdGhhdCBhIHByb3BlcnR5IGhhcyBjaGFuZ2VkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG93bmVyIG9mIHRoZSBwcm9wZXJ0eVxuICogQHBhcmFtIHtPYmplY3R9IGNoYW5nZXMgVGhlIGRldGFpbHMgb2YgcHJvcGVydHkgY2hhbmdlcyB0aGF0XG4gKiBvY2N1cnJlZCBvbiB0aGUgY29udGV4dFxuICovXG5mdW5jdGlvbiBub3RpZnkoc291cmNlLCBjaGFuZ2VzKSB7XG4gICAgY29uc3QgcXVldWUgPSBnZXRQcmlvcml0eVF1ZXVlKHNvdXJjZSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGJ1aWxkUHJpb3JpdHlRdWV1ZShxdWV1ZSk7XG4gICAgfVxuICAgIHF1ZXVlLmZvckVhY2goZnVuY3Rpb24ocHJpb3JpdHksIGNhbGxiYWNrKXtcbiAgICAgICAgY2FsbGJhY2soc291cmNlLCBjaGFuZ2VzLCBwcmlvcml0eSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogQnVpbGRzIHRoZSBwcmlvcml0eSBxdWV1ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QgY29udGFpbmluZyB0aGUgcHJpb3JpdHkgcXVldWVcbiAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlIFRoZSBhcnJheSB0aGF0IHdpbGwgY29udGFpbiB0aGUgcXVldWUgc29ydGVkIGJ5IHByaW9yaXR5XG4gKi9cbmZ1bmN0aW9uIGJ1aWxkUHJpb3JpdHlRdWV1ZShzb3VyY2UsIHF1ZXVlKSB7XG4gIHNvdXJjZS5jaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihwcmlvcml0eSwgY2FsbGJhY2spIHtcbiAgICBxdWV1ZS5wdXNoKHtwcmlvcml0eSwgY2FsbGJhY2t9KTtcbiAgfSk7XG4gIHF1ZXVlLnNvcnQocHJpb3JpdHlDb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBBIGJhc2ljIHNvcnQgY29tcGFyYXRvclxuICpcbiAqIEBwYXJhbSBpdGVtMVxuICogQHBhcmFtIGl0ZW0yXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBwcmlvcml0eUNvbXBhcmF0b3IoaXRlbTEsIGl0ZW0yKXtcbiAgICBjb25zdCBwMSA9IH5+aXRlbTEucHJpb3JpdHk7XG4gICAgY29uc3QgcDIgPSB+fml0ZW0yLnByaW9yaXR5O1xuXG4gICAgaWYgKHAxID09PSBwMil7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiBwMSA+IHAyID8gMSA6IC0xO1xufVxuIiwiaW1wb3J0IHttaXhpbk5vdGlmaWVyLCBxdWV1ZU5vdGlmaWNhdGlvbiwgZ2V0Q2hhbmdlTGlzdGVuZXJzfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgYWN0aXZlQmluZGluZ3MgPSBuZXcgV2Vha01hcCgpO1xuXG5mdW5jdGlvbiBjcmVhdGVHZXR0ZXIocHJvcGVydHkpIHtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZ2V0UHJvcGVydHlWYWx1ZXMoc2VsZilbcHJvcGVydHldO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU2V0dGVyKHByb3BlcnR5LCBkZXNjcmlwdG9yKSB7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCBzdXNwZW5kTm90aWZpY2F0aW9ucyA9IHNlbGYuc3VzcGVuZE5vdGlmaWNhdGlvbnM7XG4gICAgICAgIGxldCB2YWx1ZSA9IGdldFByb3BlcnR5VmFsdWVzKHNlbGYpW3Byb3BlcnR5XTtcbiAgICAgICAgLy8gSG9ub3IgYW4gZXhpc3Rpbmcgc2V0dGVyIGlmIGFueVxuICAgICAgICBpZiAodHlwZW9mIGRlc2NyaXB0b3Iuc2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yLnNldC5jYWxsKHNlbGYsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIC8vIE11dGF0aW9ucz8gQ2FzdHM/XG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRvci5nZXQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRlc2NyaXB0b3IuZ2V0LmNhbGwoc2VsZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBuZXdWYWx1ZSB8fCBub3RpZnlQcmVDb21taXQoc2VsZiwge1twcm9wZXJ0eV06IHtvbGRWYWx1ZSwgbmV3VmFsdWV9fSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICBpZiAoc3VzcGVuZE5vdGlmaWNhdGlvbnMgPT09IGZhbHNlICYmICFnZXRDaGFuZ2VMaXN0ZW5lcnMuY2FsbChzZWxmKS52YWx1ZXMoKS5uZXh0KCkuZG9uZSkge1xuICAgICAgICAgICAgcXVldWVOb3RpZmljYXRpb24oc2VsZiwgcHJvcGVydHksIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0UHJvcGVydHlWYWx1ZXMoc2VsZilbcHJvcGVydHldID0gdmFsdWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRQcm9wZXJ0eVZhbHVlcyhjb250ZXh0KSB7XG4gICAgaWYgKGFjdGl2ZUJpbmRpbmdzLmhhcyhjb250ZXh0KSkge1xuICAgICAgICByZXR1cm4gYWN0aXZlQmluZGluZ3MuZ2V0KGNvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcbiAgICBhY3RpdmVCaW5kaW5ncy5zZXQoY29udGV4dCwgdmFsdWVzKTtcbiAgICByZXR1cm4gdmFsdWVzO1xufVxuXG5mdW5jdGlvbiBub3RpZnlQcmVDb21taXQoc291cmNlLCBjaGFuZ2VzKSB7XG4gICAgbGV0IGNhbmNlbGVkID0gZmFsc2U7XG4gICAgc291cmNlLnByZUNvbW1pdExpc3RlbmVycy5mb3JFYWNoKHByZUNvbW1pdENhbGxiYWNrID0+IHtcbiAgICAgICAgY2FuY2VsZWQgPSAocHJlQ29tbWl0Q2FsbGJhY2soc291cmNlLCBjaGFuZ2VzLCBjYW5jZWxlZCkgPT09IGZhbHNlKSB8fCBjYW5jZWxlZDtcbiAgICB9KTtcbiAgICByZXR1cm4gY2FuY2VsZWQ7XG59XG5cbi8qKlxuICogU3RydWN0dXJlcyB0aGUgcHJvdG90eXBlIHRvIGRlZmluZSBhIGJpbmRhYmxlIHByb3BlcnR5XG4gKiBvbiB0aGUgZmlyc3Qgd3JpdGUgd2hlbiBcInRoaXNcIiBpcyBhbiBpbnN0YW5jZSBvZiB0aGVcbiAqIGNsYXNzIG9yIHByb3RvdHlwZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGJpbmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmRhYmxlKHByb3BlcnR5KSB7XG4gICAgcmV0dXJuIGNvbnN0cnVjdG9yID0+IHtcbiAgICAgICAgLy8gTWl4aW5cbiAgICAgICAgY29uc3QgcHJvdG90eXBlID0gY29uc3RydWN0b3IucHJvdG90eXBlO1xuICAgICAgICBpZiAoIWFjdGl2ZUJpbmRpbmdzLmhhcyhwcm90b3R5cGUpKSB7XG4gICAgICAgICAgICBtaXhpbk5vdGlmaWVyKHByb3RvdHlwZSk7XG4gICAgICAgICAgICBhY3RpdmVCaW5kaW5ncy5zZXQocHJvdG90eXBlLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwgcHJvcGVydHkpIHx8IHt9O1xuICAgICAgICAvLyBhbHJlYWR5IGJvdW5kIC0gbm90aGluZyB0byBkb1xuICAgICAgICBpZiAoYWN0aXZlQmluZGluZ3MuaGFzKGRlc2NyaXB0b3IuZ2V0KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgcHJvcGVydHksIHtcbiAgICAgICAgICAgIGdldDogZGVzY3JpcHRvci5nZXQgfHwgY3JlYXRlR2V0dGVyKHByb3BlcnR5KSxcbiAgICAgICAgICAgIHNldDogY3JlYXRlU2V0dGVyKHByb3BlcnR5LCBkZXNjcmlwdG9yKSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGRlc2NyaXB0b3IuZW51bWVyYWJsZVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuZXhwb3J0IHtxdWV1ZU5vdGlmaWNhdGlvbn07Il0sIm5hbWVzIjpbImNyZWF0ZVN0b3JlIiwic291cmNlIiwic3RvcmUiLCJNYXAiLCJzZXQiLCJnZXRDaGFuZ2VMaXN0ZW5lcnMiLCJnZXQiLCJ0aGlzIiwiY2hhbmdlTGlzdGVuZXJzIiwiZ2V0UHJlQ29tbWl0TGlzdGVuZXJzIiwicHJlQ29tbWl0TGlzdGVuZXJzIiwiZ2V0UHJpb3JpdHlRdWV1ZSIsInByaW9yaXR5UXVldWUiLCJhZGRDaGFuZ2VMaXN0ZW5lciIsImNhbGxiYWNrIiwicHJpb3JpdHkiLCJsZW5ndGgiLCJjYWxsIiwicmVtb3ZlQ2hhbmdlTGlzdGVuZXIiLCJkZWxldGUiLCJhZGRQcmVDb21taXRMaXN0ZW5lciIsInJlbW92ZVByZUNvbW1pdExpc3RlbmVyIiwicXVldWVOb3RpZmljYXRpb24iLCJwcm9wZXJ0eU5hbWUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwiaW5mbyIsImNoYW5nZXNCeU9iamVjdCIsInVuZGVmaW5lZCIsImNoYW5nZXMiLCJhZGQiLCJuZXh0RnJhbWVJZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInByb2Nlc3NpbmdRdWV1ZSIsInF1ZXVlIiwicHJvY2Vzc2luZ0NoYW5nZXMiLCJTZXQiLCJmb3JFYWNoIiwibWl4aW5Ob3RpZmllciIsInByb3RvdHlwZSIsImRlZmluZVByb3BlcnRpZXMiLCJ2YWx1ZSIsIndyaXRhYmxlIiwibm90aWZ5IiwiYnVpbGRQcmlvcml0eVF1ZXVlIiwicHVzaCIsInNvcnQiLCJwcmlvcml0eUNvbXBhcmF0b3IiLCJpdGVtMSIsIml0ZW0yIiwicDEiLCJwMiIsImNyZWF0ZUdldHRlciIsInByb3BlcnR5Iiwic2VsZiIsImdldFByb3BlcnR5VmFsdWVzIiwiY3JlYXRlU2V0dGVyIiwiZGVzY3JpcHRvciIsInN1c3BlbmROb3RpZmljYXRpb25zIiwibm90aWZ5UHJlQ29tbWl0IiwidmFsdWVzIiwibmV4dCIsImRvbmUiLCJjb250ZXh0IiwiYWN0aXZlQmluZGluZ3MiLCJoYXMiLCJjYW5jZWxlZCIsInByZUNvbW1pdENhbGxiYWNrIiwiYmluZGFibGUiLCJjb25zdHJ1Y3RvciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIldlYWtNYXAiXSwibWFwcGluZ3MiOiJzTkFFQSxTQUFTQSxHQUFZQyxNQUNYQyxvQkFDZSxHQUFJQyx3QkFDRCxHQUFJQSxnQ0FHdEJDLElBQUlILEVBQVFDLEdBQ1hBLEVBUVgsUUFBZ0JHLFFBQ05ILEdBQVFBLEVBQU1JLElBQUlDLE9BQVNQLEVBQVlPLFlBQ3RDTCxHQUFNTSxnQkFTakIsUUFBZ0JDLFFBQ1JQLEdBQVFBLEVBQU1JLElBQUlDLE9BQVNQLEVBQVlPLFlBQ3RDTCxHQUFNUSxtQkFTZixRQUFnQkMsR0FBaUJWLE1BQ3pCQyxHQUFRQSxFQUFNSSxJQUFJTCxJQUFXRCxFQUFZQyxTQUN4Q0MsR0FBTVUsY0FVZixRQUFnQkMsR0FBa0JDLE1BQVVDLDBEQUFXLElBQ2xDUixNQUFNUyxPQUFTLElBQ2JDLEtBQUtWLE1BQU1ILElBQUlVLEVBQVVDLEdBUWhELFFBQWdCRyxHQUFxQkosS0FDaEJQLE1BQU1TLE9BQVMsSUFDYkMsS0FBS1YsTUFBTVksT0FBT0wsR0FVekMsUUFBZ0JNLEdBQXFCTixNQUFVQywwREFBVyxJQUNoQ0UsS0FBS1YsTUFBTUgsSUFBSVUsRUFBVUMsR0FRbkQsUUFBZ0JNLEdBQXdCUCxLQUNkRyxLQUFLVixNQUFNWSxPQUFPTCxHQTJFNUMsUUFBZ0JRLEdBQWtCckIsRUFBUXNCLEVBQWNDLEVBQVVDLE1BQzFERCxJ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
